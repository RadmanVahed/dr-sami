import{d as C,aE as W,aH as j,W as E,aF as V,p as b,i as n,g as y,o as v,j as m,q as O,s as U,aZ as F,al as N,aI as H,aw as X,m as k,P as G,a4 as J,l as _,ah as A,a_ as Y,a$ as Z,u as K,aU as Q,C as z,J as ee,b0 as te,aY as ae,b1 as oe,b2 as ne,b3 as se,c as I,a as h,b4 as le,h as B,n as M,F as ie}from"#entry";import{u as re,f as ue,a as de,m as w,r as x,d as ce,M as P}from"./DqwQmNxe.js";const[pe,fe]=W("DialogRoot");var me=C({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(s,{emit:e}){const o=s,l=j(o,"open",e,{defaultValue:o.defaultOpen,passive:o.open===void 0}),a=E(),i=E(),{modal:d}=V(o);return fe({open:l,modal:d,openModal:()=>{l.value=!0},onOpenChange:p=>{l.value=p},onOpenToggle:()=>{l.value=!l.value},contentId:"",titleId:"",descriptionId:"",triggerElement:a,contentElement:i}),(p,r)=>b(p.$slots,"default",{open:n(l),close:()=>l.value=!1})}}),ge=me,ve=C({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(o,c)=>(v(),y(n(F),O(U(e)),{default:m(()=>[b(o.$slots,"default")]),_:3},16))}}),he=ve,ye=C({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const e=s,o=pe(),{forwardRef:c,currentElement:l}=N();return o.contentId||=H(void 0,"reka-dialog-content"),X(()=>{o.triggerElement.value=l.value}),(a,i)=>(v(),y(n(G),k(e,{ref:n(c),type:a.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":n(o).open.value||!1,"aria-controls":n(o).open.value?n(o).contentId:void 0,"data-state":n(o).open.value?"open":"closed",onClick:n(o).onOpenToggle}),{default:m(()=>[b(a.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),_e=ye;function Ce(s){const e=new WeakMap,o=re();function c(a){if(s.mode!=="popLayout")return;const i=a.element,d=i.offsetParent,p=d instanceof HTMLElement&&d.offsetWidth||0,r={height:i.offsetHeight||0,width:i.offsetWidth||0,top:i.offsetTop,left:i.offsetLeft,right:0};r.right=p-r.width-r.left;const u=s.anchorX==="left"?`left: ${r.left}`:`right: ${r.right}`;a.element.dataset.motionPopId=a.id;const t=document.createElement("style");o.value.nonce&&(t.nonce=o.value.nonce),e.set(a,t),document.head.appendChild(t),t.sheet&&t.sheet.insertRule(`
    [data-motion-pop-id="${a.id}"] {
      position: absolute !important;
      width: ${r.width}px !important;
      height: ${r.height}px !important;
      top: ${r.top}px !important;
      ${u}px !important;
      }
      `)}function l(a){const i=e.get(a);i&&(e.delete(a),ue.render(()=>{document.head.removeChild(i)}))}return{addPopStyle:c,removePopStyle:l,styles:e}}function L(s){return Promise.resolve().then(()=>{s()})}const be=C({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(s){const e=s;de(e);const{addPopStyle:o,removePopStyle:c,styles:l}=Ce(e);function a(u){let t=u;for(;t;){if(w.get(t))return t;t=t.firstElementChild}return null}function i(u){const t=w.get(u);t&&(c(t),t.isVShow=!0,x(u),L(()=>{t.setActive("exit",!1)}))}const d=new Map;J(()=>{d.clear()});function p(u,t){var q;const g=a(u),f=w.get(g);if(!g||!f){t(),d.size===0&&((q=e.onExitComplete)==null||q.call(e));return}d.set(g,!0),x(g),o(f);function $(D){var R,S;if((R=D?.detail)!=null&&R.isExit){const T=f.visualElement.projection;if(T?.animationProgress>0&&!f.isSafeToRemove&&!f.isVShow)return;x(g),d.delete(g),d.size===0&&((S=e.onExitComplete)==null||S.call(e)),l.has(f)?c(f):f.willUpdate("done"),t(),g.isConnected||f.unmount(!0)}}L(()=>{f.setActive("exit",!0),ce.set(g,$),g.addEventListener("motioncomplete",$)})}const r=_(()=>e.mode!=="wait"?{tag:e.as}:{mode:e.mode==="wait"?"out-in":void 0});return(u,t)=>(v(),y(A(u.mode==="wait"?Y:Z),k({css:!1},r.value,{appear:"",onEnter:i,onLeave:p}),{default:m(()=>[b(u.$slots,"default")]),_:3},16))}}),we={slots:{base:"rounded-md w-full",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none p-4 sm:p-8"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},xe=["onClick"],ke=Object.assign({inheritAttrs:!1},{__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(s){const e=s,o=K(),[c,l]=Q(),a=E(!1),i=_(()=>z({extend:z(we),...o.ui?.prose?.img||{}})({zoom:e.zoom,open:a.value})),d=_(()=>{if(e.src?.startsWith("/")&&!e.src.startsWith("//")){const r=ee(te(ae().app.baseURL));if(r!=="/"&&!e.src.startsWith(r))return oe(r,e.src)}return e.src}),p=_(()=>`${d.value}::${ne()}`);return e.zoom&&se(window,"scroll",()=>{a.value=!1}),(r,u)=>(v(),I(ie,null,[h(n(c),null,{default:m(()=>[(v(),y(A(n(le)),k({src:d.value,alt:s.alt,width:s.width,height:s.height},r.$attrs,{class:i.value.base({class:[e.ui?.base,e.class]})}),null,16,["src","alt","width","height","class"]))]),_:1}),s.zoom?(v(),y(n(ge),{key:0,open:a.value,"onUpdate:open":u[0]||(u[0]=t=>a.value=t),modal:!1},{default:m(({close:t})=>[h(n(_e),{"as-child":""},{default:m(()=>[h(n(P),{"layout-id":p.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:m(()=>[h(n(l))]),_:1},8,["layout-id"])]),_:1}),h(n(he),null,{default:m(()=>[h(n(be),null,{default:m(()=>[a.value?(v(),y(n(P),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:M(i.value.overlay({class:[e.ui?.overlay]}))},null,8,["class"])):B("",!0),a.value?(v(),I("div",{key:1,class:M(i.value.content({class:[e.ui?.content]})),onClick:t},[h(n(P),{"as-child":"","layout-id":p.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:m(()=>[h(n(l))]),_:1},8,["layout-id"])],10,xe)):B("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(v(),y(n(l),{key:1}))],64))}});export{ke as default};
